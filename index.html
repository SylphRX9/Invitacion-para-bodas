<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Invitaci√≥n de Boda</title>

<!-- Leaflet (mapa real con OpenStreetMap) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
  :root{
    --rosa:#ff4d6d;
    --cielo:#6ec6ff;       /* azul tipo Toy Story */
    --papel:#fff8e7;
    --azul:#1e90ff;
    --marco:#dcdcdc;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Georgia", serif;
    background: var(--cielo);
    overflow:hidden; /* control del escenario */
  }

  /* ====== CIELO (Nubes tipo Toy Story) ====== */
  #cielo{
    position:fixed;
    inset:0;
    z-index:0;
    pointer-events:none;
  }
  .cloud{
    position:absolute;
    width: 220px;
    height: 140px;
    animation: moveCloud linear infinite;
  }
  /* diferentes velocidades / alturas */
  .c1{ top:10vh; left:-25vw; animation-duration: 60s; transform: scale(1.1); }
  .c2{ top:28vh; left:-35vw; animation-duration: 80s; transform: scale(.9); }
  .c3{ top:52vh; left:-30vw; animation-duration: 70s; transform: scale(1.2); }
  .c4{ top:72vh; left:-40vw; animation-duration: 95s; transform: scale(1.0); }

  @keyframes moveCloud {
    from { transform: translateX(0) }
    to   { transform: translateX(140vw) }
  }

  /* ====== P√âTALOS SVG ====== */
  #petalos{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:1;
  }
  .petalo{
    position:absolute;
    width:28px;height:28px;
    animation: caer var(--dur,7s) linear infinite, vaiv√©n var(--vaiven,4s) ease-in-out infinite;
    transform-origin: 50% 0%;
    opacity: var(--op, .9);
  }
  @keyframes caer{
    from{ transform: translateY(-15vh) rotate(0deg); }
    to{ transform: translateY(115vh) rotate(360deg); }
  }
  @keyframes vaiv√©n{
    0%{ margin-left: -10px; }
    50%{ margin-left: 10px; }
    100%{ margin-left: -10px; }
  }

  /* ====== CONTENIDO CENTRAL ====== */
  .center{
    position:fixed;
    top:50%; left:50%;
    transform: translate(-50%,-50%);
    text-align:center;
    z-index:2;
  }

  /* ====== SOBRE (m√°s real con flaps y forro interno) ====== */
  .sobreWrap{ perspective: 1200px; }
  .sobre{
    width: 280px; height: 185px;
    position:relative;
    margin:auto;
    transform-style: preserve-3d;
    filter: drop-shadow(0 12px 26px rgba(0,0,0,.25));
  }

  /* base rectangular */
  .cuerpo{
    position:absolute; inset:0;
    background:#ffffff;
    border:2px solid var(--marco);
    border-radius:12px;
    z-index:1;
    overflow:hidden; /* para mostrar el forro */
  }
  /* forro interno con patr√≥n en diagonal */
  .liner{
    position:absolute; inset:8px 8px 28px 8px;
    border-radius:10px;
    background:
      repeating-linear-gradient(135deg,
        #ffd6de 0 10px,
        #fff 10px 20px);
    opacity:.9;
  }

  /* flaps laterales (tri√°ngulos) */
  .flap-left, .flap-right, .flap-bottom{
    position:absolute;
    background:#f7f7f7;
  }
  .flap-left{
    left:0; top:20px; bottom:20px; width:50%;
    clip-path: polygon(0 0, 100% 50%, 0 100%);
    border-left:2px solid var(--marco);
  }
  .flap-right{
    right:0; top:20px; bottom:20px; width:50%;
    clip-path: polygon(100% 0, 0 50%, 100% 100%);
    border-right:2px solid var(--marco);
  }
  .flap-bottom{
    left:12px; right:12px; bottom:0; height:46%;
    clip-path: polygon(0 100%, 50% 0, 100% 100%);
    border-bottom:2px solid var(--marco);
    border-left:2px solid var(--marco);
    border-right:2px solid var(--marco);
  }

  /* tapa superior */
  .tapa{
    position:absolute; left:0; right:0; top:0; height:58%;
    background:linear-gradient(#fafafa,#f0f0f0);
    border:2px solid var(--marco); border-bottom:none;
    border-radius:12px 12px 0 0;
    transform-origin: top center;
    transform: rotateX(0deg);
    z-index:3;
    box-shadow: 0 4px 12px rgba(0,0,0,.08) inset;
  }
  /* pliegue de la tapa (l√≠nea) */
  .tapa:after{
    content:"";
    position:absolute; left:10px; right:10px; bottom:6px; height:2px;
    background: linear-gradient(to right, transparent, #bbb, transparent);
    opacity:.7;
  }

  /* sello */
  .sello{
    position:absolute; bottom:-12px; left:50%;
    transform: translateX(-50%);
    width:60px; height:24px; background:var(--rosa);
    border-radius:24px;
    filter: drop-shadow(0 0 8px rgba(255,77,109,.6));
    z-index:5;
  }

  .sobre.abre .tapa{ animation: abrir 1s ease forwards; }
  @keyframes abrir{
    to{ transform: rotateX(-160deg); }
  }

  .btn{
    margin-top:18px;
    padding:12px 26px;
    border:none; border-radius:28px;
    font-size:16px; cursor:pointer;
    background:var(--rosa); color:#fff;
    box-shadow:0 0 18px rgba(255,77,109,.65);
    transition:.25s;
  }
  .btn:hover{ transform: translateY(-1px); filter:brightness(1.05); }

  /* ====== FLASH ====== */
  #flash{
    position:fixed; inset:0; background:white; opacity:0; z-index:3; pointer-events:none;
    transition: opacity 1.8s ease;
  }
  #flash.mostrar{ opacity:1; }

  /* ====== HOJAS ====== */
  .hoja{
    display:none;
    width:min(92vw,560px);
    margin:auto;
    background:var(--papel);
    border-radius:16px;
    padding:28px 22px;
    box-shadow: 0 12px 30px rgba(0,0,0,.22);
    text-align:center;
    z-index:2;
  }
  .hoja h2{ margin-top:0; font-weight:600 }
  .navegacion{ margin-top:18px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
  .navbtn{
    padding:10px 18px; border:none; border-radius:20px;
    background:#87ceeb; color:#fff; cursor:pointer;
  }

  /* ====== MAPA REAL (Leaflet) + LEYENDAS ====== */
  .mapa{
    width:100%; height:320px; background:#cfe9ff;
    border-radius:12px; position:relative;
    overflow:hidden;
    box-shadow: inset 0 0 40px rgba(0,0,0,.08);
  }
  #realMap{ position:absolute; inset:0; }
  /* Tarjetas flotantes */
  .legend{
    position:absolute;
    background:#fff;
    border-radius:14px;
    padding:10px 14px;
    display:inline-flex;
    align-items:center;
    gap:12px;
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
    cursor:pointer;
    user-select:none;
    transition: transform .15s ease, box-shadow .15s ease;
    z-index: 500; /* sobre el mapa */
  }
  .legend:hover{ transform: translateY(-2px); box-shadow: 0 10px 22px rgba(0,0,0,.18); }
  .badge{
    width:34px; height:34px; border-radius:50%;
    background:var(--azul);
    color:#fff; display:grid; place-items:center; font-weight:700;
    box-shadow: 0 0 12px rgba(30,144,255,.6);
  }
  .legendText{ font-weight:600; white-space:nowrap; }
  /* posiciones */
  .l1{ top:12px; left:12px; }
  .l2{ top:12px; right:12px; }
  .l3{ bottom:12px; left:50%; transform:translateX(-50%); }

  /* Marcadores tipo c√≠rculo azul con n√∫mero (para Leaflet) */
  .pin{
    width:34px; height:34px; border-radius:50%;
    background:var(--azul);
    color:#fff; display:grid; place-items:center; font-weight:700;
    box-shadow:0 0 12px rgba(30,144,255,.6);
    border:2px solid #fff;
  }

  /* ====== RESPONSIVE ====== */
  @media (max-width:520px){
    .sobre{ width: 250px; height:165px; }
    .legend{ padding:9px 12px; }
    .badge{ width:30px; height:30px; }
    .mapa{ height:300px; }
  }
</style>
</head>
<body>

<!-- ====== Nubes estilo Toy Story (SVG con formas redondas) ====== -->
<div id="cielo" aria-hidden="true">
  <!-- cada nube es un SVG con ‚Äúpuffs‚Äù -->
  <svg class="cloud c1" viewBox="0 0 220 140">
    <g fill="#fff">
      <circle cx="60" cy="80" r="38"/>
      <circle cx="100" cy="62" r="48"/>
      <circle cx="145" cy="80" r="40"/>
      <rect x="45" y="90" width="120" height="28" rx="14" ry="14"/>
    </g>
  </svg>
  <svg class="cloud c2" viewBox="0 0 220 140">
    <g fill="#fff">
      <circle cx="70" cy="78" r="34"/>
      <circle cx="110" cy="60" r="46"/>
      <circle cx="155" cy="78" r="36"/>
      <rect x="55" y="88" width="120" height="26" rx="13" ry="13"/>
    </g>
  </svg>
  <svg class="cloud c3" viewBox="0 0 220 140">
    <g fill="#fff">
      <circle cx="60" cy="76" r="36"/>
      <circle cx="100" cy="58" r="50"/>
      <circle cx="150" cy="76" r="38"/>
      <rect x="48" y="88" width="124" height="28" rx="14" ry="14"/>
    </g>
  </svg>
  <svg class="cloud c4" viewBox="0 0 220 140">
    <g fill="#fff">
      <circle cx="66" cy="78" r="34"/>
      <circle cx="106" cy="60" r="44"/>
      <circle cx="150" cy="78" r="36"/>
      <rect x="54" y="90" width="118" height="26" rx="13" ry="13"/>
    </g>
  </svg>
</div>

<!-- ====== P√âTALOS ====== -->
<div id="petalos" aria-hidden="true"></div>

<!-- ====== INTRO (SOBRE) ====== -->
<div class="center" id="intro">
  <div class="sobreWrap">
    <div class="sobre" id="sobre">
      <div class="cuerpo">
        <div class="liner"></div>
        <div class="flap-left"></div>
        <div class="flap-right"></div>
        <div class="flap-bottom"></div>
      </div>
      <div class="tapa"></div>
      <div class="sello"></div>
    </div>
  </div>
  <button class="btn" id="abrirBtn">Abrir sobre</button>
</div>

<!-- FLASH -->
<div id="flash"></div>

<!-- ====== HOJAS ====== -->
<div class="center" id="paginas">
  <div class="hoja" id="hoja1">
    <h2>üíç Te invitamos a nuestra boda üíç</h2>
    <div class="navegacion">
      <button class="navbtn" onclick="mostrarPagina(2)">Siguiente ‚ûú</button>
    </div>
  </div>

  <div class="hoja" id="hoja2">
    <h2>‚è∞ Horarios</h2>
    <p>Ceremonia: 4:00 PM</p>
    <p>Boda: 5:00 PM</p>
    <p>Fiesta: 7:00 PM</p>
    <div class="navegacion">
      <button class="navbtn" onclick="mostrarPagina(1)">‚¨Ö Anterior</button>
      <button class="navbtn" onclick="mostrarPagina(3)">Siguiente ‚ûú</button>
    </div>
  </div>

  <div class="hoja" id="hoja3">
    <h2>üìç Ubicaciones</h2>
    <div class="mapa">
      <div id="realMap"></div>

      <!-- Tarjeta 1 -->
      <div class="legend l1" id="legend1" title="Abrir en Google Maps">
        <div class="badge">1</div>
        <div class="legendText">Ceremonia</div>
      </div>
      <!-- Tarjeta 2 -->
      <div class="legend l2" id="legend2">
        <div class="badge">2</div>
        <div class="legendText">Boda</div>
      </div>
      <!-- Tarjeta 3 -->
      <div class="legend l3" id="legend3">
        <div class="badge">3</div>
        <div class="legendText">Fiesta</div>
      </div>
    </div>
    <div class="navegacion">
      <button class="navbtn" onclick="mostrarPagina(2)">‚¨Ö Anterior</button>
      <button class="navbtn" onclick="mostrarPagina(4)">Siguiente ‚ûú</button>
    </div>
  </div>

  <div class="hoja" id="hoja4">
    <h2>‚ú® ¬°Gracias por abrir! ‚ú®</h2>
    <p>¬°Te esperamos en nuestro gran d√≠a! üíñ</p>
    <div class="navegacion">
      <button class="navbtn" onclick="mostrarPagina(3)">‚¨Ö Anterior</button>
    </div>
  </div>
</div>

<script>
  /* ====== P√âTALOS SVG DIN√ÅMICOS ====== */
  const petalosCont = document.getElementById("petalos");
  const PETAL_COUNT = 30;
  for(let i=0;i<PETAL_COUNT;i++){
    const wrap = document.createElement("div");
    wrap.className = "petalo";
    wrap.style.left = Math.random()*100 + "vw";
    wrap.style.top  = (-5 - Math.random()*30) + "vh";
    wrap.style.setProperty('--dur', (6 + Math.random()*6) + 's');
    wrap.style.setProperty('--vaiven', (3 + Math.random()*4) + 's');
    wrap.style.setProperty('--op', (0.6 + Math.random()*0.4));
    wrap.style.animationDelay = (Math.random()*-8)+'s';

    // SVG del p√©talo (forma de gota/rosa)
    wrap.innerHTML = `
      <svg viewBox="0 0 24 24" width="28" height="28">
        <path d="M12 2 C10 5, 6 7, 6 11 C6 15, 9 19, 12 22 C15 19, 18 15, 18 11 C18 7, 14 5, 12 2 Z"
              fill="#e11d48"/>
        <path d="M12 5 C10.8 7, 9 8.5, 9 11 C9 13.8, 10.8 16.2, 12 17.6"
              fill="none" stroke="#b91c1c" stroke-width="1" opacity=".4"/>
      </svg>
    `;
    petalosCont.appendChild(wrap);
  }

  /* ====== L√ìGICA DE SOBRE/FLASH/P√ÅGINAS ====== */
  const abrirBtn = document.getElementById("abrirBtn");
  const sobre = document.getElementById("sobre");
  const flash = document.getElementById("flash");
  const intro = document.getElementById("intro");

  abrirBtn.addEventListener("click", () => {
    sobre.classList.add("abre");
    setTimeout(()=>{
      flash.classList.add("mostrar");
      setTimeout(()=>{
        flash.classList.remove("mostrar");
        intro.style.display = "none";
        mostrarPagina(1);
        // Inicializar mapa cuando se abre la invitaci√≥n
        initMap();
      }, 1700); // tiempo del flash
    }, 900); // tiempo de apertura
  });

  function mostrarPagina(num){
    for(let i=1;i<=4;i++){
      const h = document.getElementById("hoja"+i);
      h.style.display = (i===num) ? "block" : "none";
    }
    if(num===3 && window._map){ setTimeout(()=>{ _map.invalidateSize(); }, 150); }
  }

  /* ====== MAPA LEAFLET ====== */
  let _map;
  function initMap(){
    if(_map) return; // evitar reinit

    // Centro por defecto (CDMX); cambia si quieres coordenadas exactas
    const centro = [19.4326, -99.1332];

    _map = L.map('realMap', {
      zoomControl: true,
      attributionControl: true,
    }).setView(centro, 12);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(_map);

    // Icono circular azul con n√∫mero (DivIcon)
    const pinDiv = num => L.divIcon({
      className: 'pin',
      html: num,
      iconSize: [34,34],
      iconAnchor: [17,17]
    });

    // Ejemplos de coordenadas (ajusta a tu evento)
    const puntos = {
      ceremonia: { name:'Ceremonia', coords:[19.4326, -99.1332] },       // Z√≥calo aprox.
      boda:      { name:'Boda',      coords:[19.427, -99.1677] },        // Colonia Roma aprox.
      fiesta:    { name:'Fiesta',    coords:[19.404, -99.157] }          // Del Valle aprox.
    };

    const m1 = L.marker(puntos.ceremonia.coords, {icon: pinDiv('1')})
      .addTo(_map).bindPopup('Ceremonia');
    const m2 = L.marker(puntos.boda.coords, {icon: pinDiv('2')})
      .addTo(_map).bindPopup('Boda');
    const m3 = L.marker(puntos.fiesta.coords, {icon: pinDiv('3')})
      .addTo(_map).bindPopup('Fiesta');

    // Ajustar vista a todos
    const group = L.featureGroup([m1,m2,m3]);
    _map.fitBounds(group.getBounds().pad(0.25));

    // Tarjetas (leyendas) click
    document.getElementById('legend1').addEventListener('click', () => {
      window.open('https://www.google.com/maps','_blank');
      _map.setView(puntos.ceremonia.coords, 16);
      m1.openPopup();
    });
    document.getElementById('legend2').addEventListener('click', () => {
      _map.setView(puntos.boda.coords, 16);
      m2.openPopup();
    });
    document.getElementById('legend3').addEventListener('click', () => {
      _map.setView(puntos.fiesta.coords, 16);
      m3.openPopup();
    });
  }
</script>
</body>
</html>
